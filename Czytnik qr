<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>INSTRUKCJA BHP</title>

  <!-- Link do biblioteki PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
  
  <script>
    // Funkcja do odczytu tekstu na głos
    function readAloud(text) {
      const speech = new SpeechSynthesisUtterance(text);
      speech.lang = 'pl-PL'; // Ustawiamy język polski
      speechSynthesis.speak(speech);
    }

    // Funkcja do odczytu zawartości PDF
    function readPDFContent(pdfUrl) {
      const loadingTask = pdfjsLib.getDocument(pdfUrl); // Wczytanie PDF
      loadingTask.promise.then(function(pdf) {
        let allText = ''; // Zmienna do przechowania całego tekstu z PDF
        const totalPages = pdf.numPages;

        // Odczytanie każdej strony z PDF
        for (let pageNum = 1; pageNum <= totalPages; pageNum++) {
          pdf.getPage(pageNum).then(function(page) {
            page.getTextContent().then(function(textContent) {
              const textItems = textContent.items;
              let pageText = '';
              
              // Zbieranie tekstu z elementów strony
              for (let i = 0; i < textItems.length; i++) {
                pageText += textItems[i].str + ' ';
              }

              allText += pageText;

              // Jeśli wszystkie strony zostały odczytane, odczytujemy tekst na głos
              if (pageNum === totalPages) {
                readAloud('Odczytuję Instrukcję BHP: ' + allText);
              }
            });
          });
        }
      }, function(error) {
        console.error('Błąd podczas ładowania pliku PDF: ' + error);
      });
    }

    window.onload = function() {
      // Wczytanie pliku PDF
      const pdfUrl = 'INSTRUKCJA_BHP.pdf'; // Link do pliku PDF
      readPDFContent(pdfUrl); // Odczytanie pliku PDF
    }
  </script>
</head>
<body>
  <h1>Witaj YArt0! Oto Twoja INSTRUKCJA BHP</h1>
  <p>Po załadowaniu, dokument PDF zostanie przeczytany na głos.</p>
</body>
</html>
